# Life-Ops v1.0.1 Release Notes

**Release Date:** October 26, 2025  
**Type:** Patch Release

---

## üêõ Bug Fixes

### Task Editing
- **Fixed save button not working in TaskEditScreen**
  - Issue: Clicking save after editing a task did not navigate to the task detail screen
  - Cause: Event consumption was happening before navigation callbacks
  - Resolution: Reordered event handling to execute navigation first, then consume the event
  - Impact: Users can now successfully save task edits and see the updated task

- **Fixed ADHOC tasks unable to be saved**
  - Issue: One-time tasks (like "Call dentist about appointment") could not be saved after editing
  - Cause: Validation incorrectly required `intervalQty >= 1` for ALL task types
  - Resolution: Updated validation to allow `intervalQty = 0` for ADHOC tasks
  - Impact: Ad-hoc/one-time tasks can now be edited and saved properly

### Sample Data
- **Fixed crash when loading sample data**
  - Issue: "Cannot access database on main thread" error when clicking "Load Sample Data" in Settings
  - Cause: `database.clearAllTables()` was executing on the main UI thread
  - Resolution: Wrapped database operation in `withContext(Dispatchers.IO)`
  - Impact: Sample data loads successfully without blocking the UI or causing crashes

---

## ‚ú® New Features

### Task Deletion
Added comprehensive delete functionality to the Task Detail screen:

- **Delete Button**: New delete icon button in the TopAppBar next to the Edit button
- **Confirmation Dialog**: Shows a confirmation dialog before deletion with:
  - Task name displayed in the warning message
  - "This action cannot be undone" warning
  - Cancel button to dismiss
  - Delete button styled in error/red color for destructive actions
- **Navigation**: Automatically navigates back to the previous screen after successful deletion
- **Error Handling**: Displays error messages if deletion fails

### Developer Experience
- **Optional Sample Data**: Sample data is no longer automatically loaded on app startup
  - Access via Settings ‚Üí Developer ‚Üí Load Sample Data
  - Provides cleaner first-run experience for users
  - Sample data still available for demos and testing

---

## üìù Technical Details

### Files Modified
- `TaskEditScreen.kt` - Fixed event consumption order in LaunchedEffect
- `SaveTaskUseCase.kt` - Updated interval validation logic for ADHOC tasks
- `DatabaseInitializer.kt` - Added IO dispatcher for database operations
- `TaskDetailViewModel.kt` - Implemented delete functionality with repository integration
- `TaskDetailScreen.kt` - Added delete UI (button + confirmation dialog)
- `SettingsScreen.kt` - Added Load Sample Data button
- `SettingsViewModel.kt` - Implemented sample data loading logic
- `LifeOpsApplication.kt` - Removed auto-initialization of sample data

### Architecture Improvements
- Navigation event system using StateFlow for one-time events
- Proper coroutine dispatcher usage for blocking operations
- Confirmation dialogs for destructive actions
- Consistent error handling patterns

---

## üì¶ Installation

### Requirements
- Android 8.0 (API 26) or higher
- ~50 MB storage space

### Download
Download the APK from the [GitHub Release](https://github.com/LukeBrummett/Life-Ops/releases/tag/v1.0.1)

### Upgrade from v1.0.0
This is a drop-in replacement. Your existing data will be preserved.

1. Download the v1.0.1 APK
2. Install over the existing app
3. All your tasks and data will remain intact

---

## üîÑ Upgrade Notes

- **No breaking changes** - Fully backward compatible with v1.0.0
- **No data migration required** - Existing database schema unchanged
- **Sample data behavior change** - If you relied on automatic sample data loading, you'll need to manually load it from Settings

---

## üß™ Testing

All changes have been tested on:
- Android Emulator (API 36)
- Features verified:
  - ‚úÖ Task creation and editing with save navigation
  - ‚úÖ ADHOC task editing and saving
  - ‚úÖ Task deletion with confirmation
  - ‚úÖ Sample data loading from Settings
  - ‚úÖ Navigation flows between screens

---

## üìä Statistics

- **5 files changed** with bug fixes
- **3 critical bugs fixed**
- **1 new feature** (task deletion)
- **1 UX improvement** (optional sample data)
- **0 breaking changes**

---

## üôè Acknowledgments

Thank you for using Life-Ops! This patch release addresses issues discovered during initial testing and adds frequently requested deletion functionality.

## üîó Links

- [Full Changelog](../../changelog.md)
- [GitHub Repository](https://github.com/LukeBrummett/Life-Ops)
- [Report Issues](https://github.com/LukeBrummett/Life-Ops/issues)
- [Contributing Guide](../../contributing.md)

---

**Previous Release:** [v1.0.0](v1.0.0.md)
